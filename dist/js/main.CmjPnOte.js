var vt=Object.defineProperty;var g=(r,t)=>vt(r,"name",{value:t,configurable:!0});g(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}g(e,"getFetchOpts");function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}g(i,"processPreload")},"polyfill")();var f=(r=>(r.MENU="menu",r.PLAYING="playing",r.PAUSED="paused",r.GAME_OVER="gameOver",r))(f||{}),c=(r=>(r.BASIC="basic",r.SHOOTER="shooter",r.ZIGZAG="zigzag",r.BOSS="boss",r))(c||{}),m=(r=>(r.PLAYER="player",r.ENEMY="enemy",r))(m||{}),w=(r=>(r.WEAPON_UPGRADE="weaponUpgrade",r.HEALTH="health",r.SHIELD="shield",r))(w||{}),S=(r=>(r.PLAYER="player",r.ENEMY="enemy",r.PLAYER_BULLET="playerBullet",r.ENEMY_BULLET="enemyBullet",r.POWER_UP="powerUp",r))(S||{}),p=(r=>(r.PLAYER_SHOOT="playerShoot",r.ENEMY_SHOOT="enemyShoot",r.EXPLOSION="explosion",r.POWER_UP="powerUp",r.HIT="hit",r))(p||{}),P=(r=>(r.STRAIGHT="straight",r.ZIGZAG="zigzag",r.SINE="sine",r.CIRCULAR="circular",r.FOLLOW="follow",r))(P||{});const yt=new Map([[f.MENU,[f.PLAYING]],[f.PLAYING,[f.PAUSED,f.GAME_OVER]],[f.PAUSED,[f.PLAYING,f.MENU]],[f.GAME_OVER,[f.MENU,f.PLAYING]]]),q=class q{constructor(){this.currentState=null,this.states=new Map}registerState(t,e){this.states.set(t,e)}changeState(t){const e=this.states.get(t);if(!e)return!1;if(this.currentState){const i=yt.get(this.currentState.type);if(i&&!i.includes(t))return!1;this.currentState.exit()}return this.currentState=e,this.currentState.enter(),!0}getCurrentState(){return this.currentState}getCurrentStateType(){return this.currentState?.type??null}canTransitionTo(t){return this.currentState?yt.get(this.currentState.type)?.includes(t)??!1:!0}update(t){this.currentState?.update(t)}render(t){this.currentState?.render(t)}handleInput(t){this.currentState?.handleInput(t)}hasState(t){return this.states.has(t)}getRegisteredStates(){return Array.from(this.states.keys())}};g(q,"StateManager");let O=q;function Mt(){return{keys:new Set,mouseX:0,mouseY:0,mouseDown:!1}}g(Mt,"createDefaultInputState");const mt={ArrowUp:"moveUp",ArrowDown:"moveDown",ArrowLeft:"moveLeft",ArrowRight:"moveRight",KeyW:"moveUp",KeyS:"moveDown",KeyA:"moveLeft",KeyD:"moveRight",Space:"fire",KeyP:"pause",Escape:"menu",Enter:"confirm"},J=class J{constructor(t){this.canvas=null,this.inputState=Mt(),this.keyBindings=new Map(Object.entries(mt)),this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.boundHandleKeyUp=this.handleKeyUp.bind(this),this.boundHandleMouseMove=this.handleMouseMove.bind(this),this.boundHandleMouseDown=this.handleMouseDown.bind(this),this.boundHandleMouseUp=this.handleMouseUp.bind(this),t&&this.attachToCanvas(t)}attachToCanvas(t){this.canvas=t,document.addEventListener("keydown",this.boundHandleKeyDown),document.addEventListener("keyup",this.boundHandleKeyUp),t.addEventListener("mousemove",this.boundHandleMouseMove),t.addEventListener("mousedown",this.boundHandleMouseDown),t.addEventListener("mouseup",this.boundHandleMouseUp),t.addEventListener("contextmenu",e=>e.preventDefault())}detach(){document.removeEventListener("keydown",this.boundHandleKeyDown),document.removeEventListener("keyup",this.boundHandleKeyUp),this.canvas&&(this.canvas.removeEventListener("mousemove",this.boundHandleMouseMove),this.canvas.removeEventListener("mousedown",this.boundHandleMouseDown),this.canvas.removeEventListener("mouseup",this.boundHandleMouseUp),this.canvas=null)}getInputState(){return this.inputState}isActionActive(t){for(const[e,i]of this.keyBindings)if(i===t&&this.inputState.keys.has(e))return!0;return!!(t==="fire"&&this.inputState.mouseDown)}isKeyPressed(t){return this.inputState.keys.has(t)}getMousePosition(){return{x:this.inputState.mouseX,y:this.inputState.mouseY}}isMouseDown(){return this.inputState.mouseDown}setKeyBinding(t,e){this.keyBindings.set(t,e)}getKeyBinding(t){return this.keyBindings.get(t)}getAllKeyBindings(){return new Map(this.keyBindings)}resetKeyBindings(){this.keyBindings=new Map(Object.entries(mt))}clearInputState(){this.inputState.keys.clear(),this.inputState.mouseDown=!1}handleKeyDown(t){this.keyBindings.has(t.code)&&t.preventDefault(),this.inputState.keys.add(t.code)}handleKeyUp(t){this.inputState.keys.delete(t.code)}handleMouseMove(t){if(!this.canvas)return;const e=this.canvas.getBoundingClientRect(),i=this.canvas.width/e.width,s=this.canvas.height/e.height;this.inputState.mouseX=(t.clientX-e.left)*i,this.inputState.mouseY=(t.clientY-e.top)*s}handleMouseDown(t){t.button===0&&(this.inputState.mouseDown=!0)}handleMouseUp(t){t.button===0&&(this.inputState.mouseDown=!1)}};g(J,"InputManager");let k=J;const Q=class Q{constructor(){this.entities=new Map,this.entitiesToAdd=[],this.entitiesToRemove=[],this.isUpdating=!1}addEntity(t){this.isUpdating?this.entitiesToAdd.push(t):this.entities.set(t.id,t)}removeEntity(t){if(this.isUpdating)this.entitiesToRemove.push(t);else{const e=this.entities.get(t);e&&(e.destroy(),this.entities.delete(t))}}getEntity(t){return this.entities.get(t)}getEntitiesByType(t){const e=[];for(const i of this.entities.values())i instanceof t&&e.push(i);return e}getAllEntities(){return Array.from(this.entities.values())}getActiveEntities(){return Array.from(this.entities.values()).filter(t=>t.active)}getEntityCount(){return this.entities.size}update(t){this.isUpdating=!0;for(const e of this.entities.values())e.active&&e.update(t);this.isUpdating=!1,this.processAdditions(),this.processRemovals(),this.removeInactiveEntities()}render(t){for(const e of this.entities.values())e.active&&e.render(t)}clear(){for(const t of this.entities.values())t.destroy();this.entities.clear(),this.entitiesToAdd=[],this.entitiesToRemove=[]}hasEntity(t){return this.entities.has(t)}processAdditions(){for(const t of this.entitiesToAdd)this.entities.set(t.id,t);this.entitiesToAdd=[]}processRemovals(){for(const t of this.entitiesToRemove){const e=this.entities.get(t);e&&(e.destroy(),this.entities.delete(t))}this.entitiesToRemove=[]}removeInactiveEntities(){const t=[];for(const[e,i]of this.entities)i.active||t.push(e);for(const e of t){const i=this.entities.get(e);i&&(i.destroy(),this.entities.delete(e))}}};g(Q,"EntityManager");let H=Q;const b={canvas:{width:480,height:800},player:{width:48,height:64,speed:300,maxHealth:3,fireRate:200,invincibleDuration:2e3},enemy:{basic:{width:40,height:40,speed:100,health:1,scoreValue:10},shooter:{width:48,height:48,speed:80,health:2,scoreValue:20,fireRate:2e3},zigzag:{width:44,height:44,speed:120,health:2,scoreValue:30},boss:{width:120,height:100,speed:50,health:20,scoreValue:200,fireRate:1e3}},bullet:{player:{width:8,height:16,speed:500,damage:1},enemy:{width:8,height:12,speed:300,damage:1}},powerUp:{dropChance:.15,fallSpeed:100},spawn:{initialRate:2e3,minRate:500,difficultyIncrease:3e4}},x=class x{constructor(t,e=b){this.lastFrameTime=0,this.isRunning=!1,this.isPaused=!1,this.animationFrameId=null,this.frameCount=0,this.fpsUpdateTime=0,this.currentFps=0;const i=document.getElementById(t);if(!i)throw new Error(`Canvas element with id '${t}' not found`);this.canvas=i;const s=i.getContext("2d");if(!s)throw new Error("Could not get 2D rendering context");this.context=s,this.config=e,this.canvas.width=e.canvas.width,this.canvas.height=e.canvas.height,this.stateManager=new O,this.inputManager=new k(this.canvas),this.entityManager=new H,this.gameLoop=this.gameLoop.bind(this)}start(){this.isRunning||(this.isRunning=!0,this.isPaused=!1,this.lastFrameTime=performance.now(),this.fpsUpdateTime=this.lastFrameTime,this.frameCount=0,this.animationFrameId=requestAnimationFrame(this.gameLoop))}stop(){this.isRunning=!1,this.isPaused=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.inputManager.detach()}pause(){this.isRunning&&(this.isPaused=!0)}resume(){this.isRunning&&this.isPaused&&(this.isPaused=!1,this.lastFrameTime=performance.now())}gameLoop(t){if(!this.isRunning)return;const e=this.calculateDeltaTime(t);this.updateFps(t);const i=this.inputManager.getInputState();this.stateManager.handleInput(i),this.isPaused||this.update(e),this.render(),this.animationFrameId=requestAnimationFrame(this.gameLoop)}calculateDeltaTime(t){const e=(t-this.lastFrameTime)/1e3;return this.lastFrameTime=t,Math.min(e,.1)}updateFps(t){this.frameCount++;const e=t-this.fpsUpdateTime;e>=1e3&&(this.currentFps=Math.round(this.frameCount*1e3/e),this.frameCount=0,this.fpsUpdateTime=t)}update(t){this.stateManager.update(t)}render(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.stateManager.render(this.context)}getStateManager(){return this.stateManager}getInputManager(){return this.inputManager}getEntityManager(){return this.entityManager}getConfig(){return this.config}getCanvas(){return this.canvas}getContext(){return this.context}getIsRunning(){return this.isRunning}getIsPaused(){return this.isPaused}getCurrentFps(){return this.currentFps}};g(x,"GameEngine");let U=x;const tt=class tt{constructor(t,e){this.type=f.MENU,this.startKeyPressed=!1,this.stateManager=t,this.config=e}enter(){this.startKeyPressed=!1}exit(){}update(t){}render(t){const{width:e,height:i}=this.config.canvas;t.fillStyle="#1a1a2e",t.fillRect(0,0,e,i),t.fillStyle="#e94560",t.font="bold 48px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("Èõ∑ÈúÜÊàòÊú∫",e/2,i/3),t.fillStyle="#16213e",t.font="24px Arial",t.fillText("Thunder Fighter",e/2,i/3+50);const s=.5+.5*Math.sin(Date.now()/300);t.fillStyle=`rgba(255, 255, 255, ${s})`,t.font="20px Arial",t.fillText("Êåâ ENTER Êàñ SPACE ÂºÄÂßãÊ∏∏Êàè",e/2,i/2+50),t.fillText("Press ENTER or SPACE to Start",e/2,i/2+80),t.fillStyle="#a0a0a0",t.font="16px Arial",t.fillText("ÊéßÂà∂ÊñπÂºè / Controls:",e/2,i-150),t.fillText("ÊñπÂêëÈîÆ / WASD - ÁßªÂä® / Move",e/2,i-120),t.fillText("Á©∫Ê†ºÈîÆ / Èº†Ê†áÂ∑¶ÈîÆ - Â∞ÑÂáª / Fire",e/2,i-90),t.fillText("P - ÊöÇÂÅú / Pause",e/2,i-60)}handleInput(t){const e=t.keys.has("Enter")||t.keys.has("Space")||t.mouseDown;e&&!this.startKeyPressed?(this.startKeyPressed=!0,this.stateManager.changeState(f.PLAYING)):e||(this.startKeyPressed=!1)}};g(tt,"MenuState");let D=tt;const et=class et{constructor(t,e,i){this.type=f.PLAYING,this.score=0,this.health=3,this.gameTime=0,this.pauseKeyPressed=!1,this.stateManager=t,this.entityManager=e,this.config=i}enter(){this.pauseKeyPressed=!1,this.score=0,this.health=this.config.player.maxHealth,this.gameTime=0,this.entityManager.clear()}exit(){}update(t){this.gameTime+=t,this.entityManager.update(t),this.health<=0&&this.stateManager.changeState(f.GAME_OVER)}render(t){const{width:e,height:i}=this.config.canvas;t.fillStyle="#0f0f23",t.fillRect(0,0,e,i),this.renderStars(t),this.entityManager.render(t),this.renderUI(t)}handleInput(t){const e=t.keys.has("KeyP")||t.keys.has("Escape");e&&!this.pauseKeyPressed?(this.pauseKeyPressed=!0,this.stateManager.changeState(f.PAUSED)):e||(this.pauseKeyPressed=!1)}renderStars(t){t.fillStyle="#ffffff";const e=this.gameTime*50%this.config.canvas.height;for(let i=0;i<50;i++){const s=i*97%this.config.canvas.width,a=(i*73+e)%this.config.canvas.height,h=i%3+1;t.globalAlpha=.3+i%5*.1,t.fillRect(s,a,h,h)}t.globalAlpha=1}renderUI(t){const{width:e}=this.config.canvas;t.fillStyle="#ffffff",t.font="20px Arial",t.textAlign="left",t.textBaseline="top",t.fillText(`ÂàÜÊï∞: ${this.score}`,10,10),t.fillStyle="#e94560",t.textAlign="right",t.fillText(`ÁîüÂëΩ: ${"‚ù§".repeat(this.health)}`,e-10,10),t.fillStyle="#a0a0a0",t.font="14px Arial",t.textAlign="left",t.fillText(`Êó∂Èó¥: ${Math.floor(this.gameTime)}s`,10,35)}addScore(t){this.score+=t}getScore(){return this.score}setHealth(t){this.health=Math.max(0,Math.min(t,this.config.player.maxHealth))}getHealth(){return this.health}takeDamage(t){this.health=Math.max(0,this.health-t)}getGameTime(){return this.gameTime}};g(et,"PlayingState");let G=et;const it=class it{constructor(t,e){this.type=f.PAUSED,this.resumeKeyPressed=!1,this.menuKeyPressed=!1,this.selectedOption=0,this.stateManager=t,this.config=e}enter(){this.resumeKeyPressed=!1,this.menuKeyPressed=!1,this.selectedOption=0}exit(){}update(t){}render(t){const{width:e,height:i}=this.config.canvas;t.fillStyle="rgba(0, 0, 0, 0.7)",t.fillRect(0,0,e,i),t.fillStyle="#e94560",t.font="bold 48px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("Ê∏∏ÊàèÊöÇÂÅú",e/2,i/3),t.fillStyle="#ffffff",t.font="24px Arial",t.fillText("PAUSED",e/2,i/3+50);const s=[{text:"ÁªßÁª≠Ê∏∏Êàè / Resume",action:"resume"},{text:"ËøîÂõûËèúÂçï / Main Menu",action:"menu"}],a=i/2+30,h=50;s.forEach((n,o)=>{const l=a+o*h,d=o===this.selectedOption;d&&(t.fillStyle="#e94560",t.fillText("‚ñ∂",e/2-150,l)),t.fillStyle=d?"#ffffff":"#808080",t.font=d?"bold 24px Arial":"24px Arial",t.fillText(n.text,e/2,l)}),t.fillStyle="#a0a0a0",t.font="16px Arial",t.fillText("‚Üë‚Üì ÈÄâÊã© / Select   Enter Á°ÆËÆ§ / Confirm",e/2,i-50),t.fillText("P / ESC ÁªßÁª≠ / Resume",e/2,i-25)}handleInput(t){const e=t.keys.has("KeyP")||t.keys.has("Escape");if(e&&!this.resumeKeyPressed){this.resumeKeyPressed=!0,this.stateManager.changeState(f.PLAYING);return}else e||(this.resumeKeyPressed=!1);t.keys.has("ArrowUp")||t.keys.has("KeyW")?this.menuKeyPressed||(this.selectedOption=Math.max(0,this.selectedOption-1),this.menuKeyPressed=!0):t.keys.has("ArrowDown")||t.keys.has("KeyS")?this.menuKeyPressed||(this.selectedOption=Math.min(1,this.selectedOption+1),this.menuKeyPressed=!0):this.menuKeyPressed=!1,(t.keys.has("Enter")||t.keys.has("Space"))&&(this.selectedOption===0?this.stateManager.changeState(f.PLAYING):this.stateManager.changeState(f.MENU))}};g(it,"PausedState");let Y=it;const st=class st{constructor(t,e){this.type=f.GAME_OVER,this.keyPressed=!1,this.selectedOption=0,this.menuKeyPressed=!1,this.finalScore=0,this.highScore=0,this.isNewHighScore=!1,this.stateManager=t,this.config=e}enter(){this.keyPressed=!1,this.menuKeyPressed=!1,this.selectedOption=0,this.loadHighScore(),this.finalScore>this.highScore?(this.highScore=this.finalScore,this.isNewHighScore=!0,this.saveHighScore()):this.isNewHighScore=!1}exit(){}update(t){}render(t){const{width:e,height:i}=this.config.canvas;if(t.fillStyle="#1a1a2e",t.fillRect(0,0,e,i),t.fillStyle="#e94560",t.font="bold 48px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("Ê∏∏ÊàèÁªìÊùü",e/2,i/4),t.fillStyle="#ffffff",t.font="24px Arial",t.fillText("GAME OVER",e/2,i/4+50),t.fillStyle="#ffffff",t.font="28px Arial",t.fillText(`ÊúÄÁªàÂæóÂàÜ: ${this.finalScore}`,e/2,i/2-40),this.isNewHighScore){const n=.5+.5*Math.sin(Date.now()/200);t.fillStyle=`rgba(233, 69, 96, ${n})`,t.font="bold 24px Arial",t.fillText("üéâ Êñ∞Á∫™ÂΩï! NEW HIGH SCORE! üéâ",e/2,i/2)}t.fillStyle="#ffd700",t.font="24px Arial",t.fillText(`ÊúÄÈ´òÂàÜ: ${this.highScore}`,e/2,i/2+40);const s=[{text:"ÈáçÊñ∞ÂºÄÂßã / Restart",action:"restart"},{text:"ËøîÂõûËèúÂçï / Main Menu",action:"menu"}],a=i/2+120,h=50;s.forEach((n,o)=>{const l=a+o*h,d=o===this.selectedOption;d&&(t.fillStyle="#e94560",t.fillText("‚ñ∂",e/2-150,l)),t.fillStyle=d?"#ffffff":"#808080",t.font=d?"bold 24px Arial":"24px Arial",t.fillText(n.text,e/2,l)}),t.fillStyle="#a0a0a0",t.font="16px Arial",t.fillText("‚Üë‚Üì ÈÄâÊã© / Select   Enter Á°ÆËÆ§ / Confirm",e/2,i-30)}handleInput(t){t.keys.has("ArrowUp")||t.keys.has("KeyW")?this.menuKeyPressed||(this.selectedOption=Math.max(0,this.selectedOption-1),this.menuKeyPressed=!0):t.keys.has("ArrowDown")||t.keys.has("KeyS")?this.menuKeyPressed||(this.selectedOption=Math.min(1,this.selectedOption+1),this.menuKeyPressed=!0):this.menuKeyPressed=!1;const e=t.keys.has("Enter")||t.keys.has("Space");e&&!this.keyPressed?(this.keyPressed=!0,this.selectedOption===0?this.stateManager.changeState(f.PLAYING):this.stateManager.changeState(f.MENU)):e||(this.keyPressed=!1)}setFinalScore(t){this.finalScore=t}getFinalScore(){return this.finalScore}getHighScore(){return this.highScore}loadHighScore(){try{const t=localStorage.getItem("thunderFighter_highScore");this.highScore=t?parseInt(t,10):0}catch{this.highScore=0}}saveHighScore(){try{localStorage.setItem("thunderFighter_highScore",this.highScore.toString())}catch{}}};g(st,"GameOverState");let F=st;var T=(r=>(r.PLAYER_BULLET_ENEMY="playerBulletEnemy",r.ENEMY_BULLET_PLAYER="enemyBulletPlayer",r.PLAYER_ENEMY="playerEnemy",r.PLAYER_POWERUP="playerPowerUp",r))(T||{});const at=class at{constructor(){this.callbacks=new Map,Object.values(T).forEach(t=>{this.callbacks.set(t,[])})}checkCollision(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}checkPlayerBulletCollisions(t,e){const i=[],s=t.filter(a=>a.active&&a.owner===m.PLAYER);for(const a of s)for(const h of e)h.active&&this.checkCollision(a.collisionBox,h.collisionBox)&&i.push({entityA:a,entityB:h,type:"playerBulletEnemy"});return i}checkEnemyBulletCollisions(t,e){const i=[];if(!e.active)return i;const s=t.filter(a=>a.active&&a.owner===m.ENEMY);for(const a of s)this.checkCollision(a.collisionBox,e.collisionBox)&&i.push({entityA:a,entityB:e,type:"enemyBulletPlayer"});return i}checkPlayerEnemyCollisions(t,e){const i=[];if(!t.active)return i;for(const s of e)s.active&&this.checkCollision(t.collisionBox,s.collisionBox)&&i.push({entityA:t,entityB:s,type:"playerEnemy"});return i}checkPlayerPowerUpCollisions(t,e){const i=[];if(!t.active)return i;for(const s of e)s.active&&this.checkCollision(t.collisionBox,s.collisionBox)&&i.push({entityA:t,entityB:s,type:"playerPowerUp"});return i}checkAllCollisions(t,e,i,s){const a=[];return a.push(...this.checkPlayerBulletCollisions(i,e)),a.push(...this.checkEnemyBulletCollisions(i,t)),a.push(...this.checkPlayerEnemyCollisions(t,e)),a.push(...this.checkPlayerPowerUpCollisions(t,s)),a}onCollision(t,e){const i=this.callbacks.get(t);i&&i.push(e)}offCollision(t,e){const i=this.callbacks.get(t);if(i){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}}processCollisions(t){for(const e of t){e.entityA.onCollision(e.entityB),e.entityB.onCollision(e.entityA);const i=this.callbacks.get(e.type);if(i)for(const s of i)s(e)}}update(t,e,i,s){const a=this.checkAllCollisions(t,e,i,s);this.processCollisions(a)}clearCallbacks(){Object.values(T).forEach(t=>{this.callbacks.set(t,[])})}};g(at,"CollisionSystem");let N=at;const ht=class ht{constructor(t,e,i,s,a=b){this.id=`bullet_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.owner=i,this.x=t,this.y=e,this.active=!0;const h=i===m.PLAYER?a.bullet.player:a.bullet.enemy;this.width=h.width,this.height=h.height,this.speed=h.speed,this.damage=h.damage,this.velocityX=0,this.velocityY=s,this.collisionBox={x:this.x,y:this.y,width:this.width,height:this.height},this.collisionType=i===m.PLAYER?S.PLAYER_BULLET:S.ENEMY_BULLET,this.canvasWidth=a.canvas.width,this.canvasHeight=a.canvas.height}update(t){this.active&&(this.move(t),this.checkBounds(),this.collisionBox.x=this.x,this.collisionBox.y=this.y)}move(t){this.x+=this.velocityX*t,this.y+=this.velocityY*t}setVelocity(t,e){this.velocityX=t,this.velocityY=e}checkBounds(){(this.y+this.height<0||this.y>this.canvasHeight||this.x+this.width<0||this.x>this.canvasWidth)&&(this.active=!1)}onCollision(t){this.owner===m.PLAYER?t.collisionType===S.ENEMY&&(this.active=!1):t.collisionType===S.PLAYER&&(this.active=!1)}checkCollision(t){const e=this.collisionBox,i=t.collisionBox;return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y}render(t){this.active&&(t.save(),this.owner===m.PLAYER?(t.fillStyle="#FFD700",t.beginPath(),t.roundRect(this.x,this.y,this.width,this.height,2),t.fill(),t.shadowColor="#FFD700",t.shadowBlur=5,t.fill()):(t.fillStyle="#FF4444",t.beginPath(),t.ellipse(this.x+this.width/2,this.y+this.height/2,this.width/2,this.height/2,0,0,Math.PI*2),t.fill(),t.shadowColor="#FF4444",t.shadowBlur=5,t.fill()),t.restore())}destroy(){this.active=!1}};g(ht,"Bullet");let M=ht;const nt=class nt{constructor(t,e,i,s=b){this.zigzagAmplitude=50,this.zigzagFrequency=2,this.elapsedTime=0,this.bossPhase=0,this.bossPhaseTime=0,this.id=`enemy_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.type=i,this.x=t,this.y=e,this.initialX=t,this.active=!0,this.config=s;const a=this.getEnemyConfig(i,s);this.width=a.width,this.height=a.height,this.speed=a.speed,this.health=a.health,this.maxHealth=a.health,this.scoreValue=a.scoreValue,this.fireRate=a.fireRate||0,this.lastFireTime=0,this.movementPattern=this.getMovementPattern(i),this.velocityX=0,this.velocityY=this.speed,this.collisionBox={x:this.x,y:this.y,width:this.width,height:this.height},this.collisionType=S.ENEMY,this.canvasWidth=s.canvas.width,this.canvasHeight=s.canvas.height}getEnemyConfig(t,e){switch(t){case c.BASIC:return e.enemy.basic;case c.SHOOTER:return e.enemy.shooter;case c.ZIGZAG:return e.enemy.zigzag;case c.BOSS:return e.enemy.boss;default:return e.enemy.basic}}getMovementPattern(t){switch(t){case c.BASIC:case c.SHOOTER:return P.STRAIGHT;case c.ZIGZAG:return P.ZIGZAG;case c.BOSS:return P.SINE;default:return P.STRAIGHT}}update(t){this.active&&(this.elapsedTime+=t,this.move(t),this.y>this.canvasHeight&&(this.active=!1),this.collisionBox.x=this.x,this.collisionBox.y=this.y)}move(t){switch(this.movementPattern){case P.STRAIGHT:this.moveStraight(t);break;case P.ZIGZAG:this.moveZigzag(t);break;case P.SINE:this.moveBoss(t);break;default:this.moveStraight(t)}}moveStraight(t){this.y+=this.speed*t}moveZigzag(t){this.y+=this.speed*t;const e=this.initialX+Math.sin(this.elapsedTime*this.zigzagFrequency*Math.PI)*this.zigzagAmplitude;this.x=Math.max(0,Math.min(e,this.canvasWidth-this.width))}moveBoss(t){switch(this.bossPhaseTime+=t,this.bossPhase){case 0:this.y<50?this.y+=this.speed*t:(this.bossPhase=1,this.bossPhaseTime=0);break;case 1:this.x=this.canvasWidth/2-this.width/2+Math.sin(this.bossPhaseTime*.5*Math.PI)*(this.canvasWidth/3),this.x=Math.max(0,Math.min(this.x,this.canvasWidth-this.width)),this.bossPhaseTime>8&&(this.bossPhase=2,this.bossPhaseTime=0);break;case 2:const e=Math.sin(this.bossPhaseTime*Math.PI)*30;this.y=50+e,this.x=this.canvasWidth/2-this.width/2+Math.sin(this.bossPhaseTime*Math.PI)*(this.canvasWidth/4),this.x=Math.max(0,Math.min(this.x,this.canvasWidth-this.width)),this.bossPhaseTime>4&&(this.bossPhase=1,this.bossPhaseTime=0);break}}setVelocity(t,e){this.velocityX=t,this.velocityY=e}fire(t){if(this.type!==c.SHOOTER&&this.type!==c.BOSS||this.fireRate<=0||t-this.lastFireTime<this.fireRate)return null;this.lastFireTime=t;const e=this.config.bullet.enemy,i=this.x+this.width/2-e.width/2,s=this.y+this.height;return new M(i,s,m.ENEMY,e.speed,this.config)}fireBoss(t){if(this.type!==c.BOSS)return[];if(this.fireRate<=0||t-this.lastFireTime<this.fireRate)return[];this.lastFireTime=t;const e=[],i=this.config.bullet.enemy,s=this.x+this.width/2,a=this.y+this.height,h=30;for(let n=-1;n<=1;n++){const o=new M(s-i.width/2+n*h,a,m.ENEMY,i.speed,this.config);e.push(o)}return e}takeDamage(t){this.health-=t,this.health<=0&&(this.health=0,this.active=!1)}onCollision(t){switch(t.collisionType){case S.PLAYER_BULLET:break;case S.PLAYER:this.active=!1;break}}checkCollision(t){const e=this.collisionBox,i=t.collisionBox;return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y}render(t){if(this.active){switch(t.save(),this.type){case c.BASIC:this.renderBasic(t);break;case c.SHOOTER:this.renderShooter(t);break;case c.ZIGZAG:this.renderZigzag(t);break;case c.BOSS:this.renderBoss(t);break}t.restore()}}renderBasic(t){t.fillStyle="#FF6B6B",t.beginPath(),t.moveTo(this.x+this.width/2,this.y+this.height),t.lineTo(this.x,this.y),t.lineTo(this.x+this.width,this.y),t.closePath(),t.fill()}renderShooter(t){t.fillStyle="#FFA500",t.beginPath(),t.moveTo(this.x+this.width/2,this.y),t.lineTo(this.x+this.width,this.y+this.height/2),t.lineTo(this.x+this.width/2,this.y+this.height),t.lineTo(this.x,this.y+this.height/2),t.closePath(),t.fill(),t.fillStyle="#FF4500",t.fillRect(this.x+this.width/2-3,this.y+this.height-5,6,8)}renderZigzag(t){t.fillStyle="#9B59B6",t.beginPath(),t.moveTo(this.x+this.width*.3,this.y),t.lineTo(this.x+this.width*.7,this.y),t.lineTo(this.x+this.width,this.y+this.height*.4),t.lineTo(this.x+this.width*.8,this.y+this.height),t.lineTo(this.x+this.width*.2,this.y+this.height),t.lineTo(this.x,this.y+this.height*.4),t.closePath(),t.fill()}renderBoss(t){t.fillStyle="#8B0000",t.beginPath(),t.moveTo(this.x+this.width/2,this.y+this.height),t.lineTo(this.x,this.y+this.height*.3),t.lineTo(this.x+this.width*.2,this.y),t.lineTo(this.x+this.width*.8,this.y),t.lineTo(this.x+this.width,this.y+this.height*.3),t.closePath(),t.fill(),t.fillStyle="#FF0000",t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height*.4,this.width*.15,0,Math.PI*2),t.fill();const e=this.width*.8,i=6,s=this.x+(this.width-e)/2,a=this.y-15;t.fillStyle="#333",t.fillRect(s,a,e,i);const h=this.health/this.maxHealth;t.fillStyle=h>.3?"#00FF00":"#FF0000",t.fillRect(s,a,e*h,i)}destroy(){this.active=!1}};g(nt,"EnemyAircraft");let C=nt;const R=class R{constructor(t,e,i,s=b){this.animationTime=0,this.pulseScale=1,this.id=`powerup_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.type=i,this.x=t,this.y=e,this.active=!0,this.config=s,this.width=R.POWERUP_SIZE,this.height=R.POWERUP_SIZE,this.speed=s.powerUp.fallSpeed,this.velocityX=0,this.velocityY=this.speed,this.collisionBox={x:this.x,y:this.y,width:this.width,height:this.height},this.collisionType=S.POWER_UP,this.canvasHeight=s.canvas.height}update(t){this.active&&(this.animationTime+=t,this.pulseScale=1+Math.sin(this.animationTime*4)*.1,this.move(t),this.y>this.canvasHeight&&(this.active=!1),this.collisionBox.x=this.x,this.collisionBox.y=this.y)}move(t){this.y+=this.velocityY*t}setVelocity(t,e){this.velocityX=t,this.velocityY=e}apply(t){switch(this.type){case w.WEAPON_UPGRADE:t.upgradeWeapon();break;case w.HEALTH:t.heal(1);break;case w.SHIELD:t.activateShield(this.config.player.invincibleDuration);break}this.active=!1}onCollision(t){t.collisionType===S.PLAYER&&(this.active=!1)}checkCollision(t){const e=this.collisionBox,i=t.collisionBox;return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y}render(t){if(!this.active)return;t.save();const e=this.x+this.width/2,i=this.y+this.height/2;switch(t.translate(e,i),t.scale(this.pulseScale,this.pulseScale),t.translate(-e,-i),this.type){case w.WEAPON_UPGRADE:this.renderWeaponUpgrade(t);break;case w.HEALTH:this.renderHealth(t);break;case w.SHIELD:this.renderShield(t);break}t.restore()}renderWeaponUpgrade(t){const e=this.x+this.width/2,i=this.y+this.height/2,s=this.width/2,a=this.width/4,h=5;t.fillStyle="#FFD700",t.beginPath();for(let n=0;n<h*2;n++){const o=n%2===0?s:a,l=n*Math.PI/h-Math.PI/2,d=e+Math.cos(l)*o,u=i+Math.sin(l)*o;n===0?t.moveTo(d,u):t.lineTo(d,u)}t.closePath(),t.fill(),t.shadowColor="#FFD700",t.shadowBlur=10,t.fill()}renderHealth(t){const e=this.width*.3,i=this.height*.8;t.fillStyle="#00FF00",t.fillRect(this.x+(this.width-e)/2,this.y+(this.height-i)/2,e,i),t.fillRect(this.x+(this.width-i)/2,this.y+(this.height-e)/2,i,e),t.shadowColor="#00FF00",t.shadowBlur=10,t.fillRect(this.x+(this.width-e)/2,this.y+(this.height-i)/2,e,i)}renderShield(t){const e=this.x+this.width/2,i=this.y+this.height/2,s=this.width/2;t.fillStyle="#4169E1",t.beginPath(),t.arc(e,i,s,0,Math.PI*2),t.fill(),t.fillStyle="#87CEEB",t.beginPath(),t.moveTo(e,i-s*.6),t.lineTo(e+s*.5,i-s*.3),t.lineTo(e+s*.5,i+s*.2),t.lineTo(e,i+s*.6),t.lineTo(e-s*.5,i+s*.2),t.lineTo(e-s*.5,i-s*.3),t.closePath(),t.fill(),t.shadowColor="#4169E1",t.shadowBlur=10,t.beginPath(),t.arc(e,i,s,0,Math.PI*2),t.fill()}destroy(){this.active=!1}static getRandomType(){const t=[w.WEAPON_UPGRADE,w.HEALTH,w.SHIELD],e=[.4,.4,.2],i=Math.random();let s=0;for(let a=0;a<t.length;a++)if(s+=e[a],i<s)return t[a];return t[0]}};g(R,"PowerUp"),R.POWERUP_SIZE=24;let I=R;const ot=class ot{constructor(t,e=b){this.lastSpawnTime=0,this.gameTime=0,this.currentDifficulty=1,this.enemiesDestroyed=0,this.bossActive=!1,this.lastDifficultyIncrease=0,this.ENEMY_TYPE_WEIGHTS={[c.BASIC]:.6,[c.SHOOTER]:.25,[c.ZIGZAG]:.15},this.gameConfig=e,this.config={enemySpawnRate:t?.enemySpawnRate??e.spawn.initialRate,difficultyIncreaseRate:t?.difficultyIncreaseRate??e.spawn.difficultyIncrease,powerUpDropChance:t?.powerUpDropChance??e.powerUp.dropChance}}update(t,e,i){this.gameTime+=t*1e3,this.updateDifficulty(),i-this.lastSpawnTime>=this.calculateSpawnRate()&&(this.spawnEnemy(e),this.lastSpawnTime=i)}updateDifficulty(){const t=Math.floor(this.gameTime/this.config.difficultyIncreaseRate);t>this.lastDifficultyIncrease&&(this.currentDifficulty=1+t*.1,this.lastDifficultyIncrease=t)}calculateSpawnRate(){const t=this.config.enemySpawnRate,e=this.gameConfig.spawn.minRate,i=t/this.currentDifficulty;return Math.max(i,e)}spawnEnemy(t){if(this.bossActive)return;const e=this.selectEnemyType(),i=this.getEnemyConfigByType(e),s=this.gameConfig.canvas.width-i.width,a=Math.random()*s,h=-i.height,n=new C(a,h,e,this.gameConfig);t.addEntity(n)}getEnemyConfigByType(t){switch(t){case c.BASIC:return this.gameConfig.enemy.basic;case c.SHOOTER:return this.gameConfig.enemy.shooter;case c.ZIGZAG:return this.gameConfig.enemy.zigzag;case c.BOSS:return this.gameConfig.enemy.boss;default:return this.gameConfig.enemy.basic}}selectEnemyType(){const t=Math.random();let e=0;for(const[i,s]of Object.entries(this.ENEMY_TYPE_WEIGHTS))if(e+=s,t<e)return i;return c.BASIC}spawnPowerUp(t,e,i){const s=this.selectPowerUpType(),a=new I(t,e,s,this.gameConfig);i.addEntity(a)}trySpawnPowerUp(t,e,i){return Math.random()<this.config.powerUpDropChance?(this.spawnPowerUp(t,e,i),!0):!1}selectPowerUpType(){return I.getRandomType()}recordEnemyDestroyed(t){this.enemiesDestroyed++,this.enemiesDestroyed%50===0&&!this.bossActive&&this.spawnBoss(t)}spawnBoss(t){const e=this.gameConfig.enemy.boss,i=(this.gameConfig.canvas.width-e.width)/2,s=-e.height,a=new C(i,s,c.BOSS,this.gameConfig);t.addEntity(a),this.bossActive=!0}onBossDefeated(){this.bossActive=!1}isBossActive(){return this.bossActive}getCurrentDifficulty(){return this.currentDifficulty}getEnemiesDestroyed(){return this.enemiesDestroyed}getGameTime(){return this.gameTime}reset(){this.lastSpawnTime=0,this.gameTime=0,this.currentDifficulty=1,this.enemiesDestroyed=0,this.bossActive=!1,this.lastDifficultyIncrease=0}setConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}};g(ot,"SpawnSystem");let _=ot;const L="thunderFighter_highScore",rt=class rt{constructor(){this.currentScore=0,this.highScore=0,this.enemiesDestroyed=0,this.totalShots=0,this.totalHits=0,this.consecutiveKills=0,this.lastKillTime=0,this.COMBO_TIMEOUT=2e3,this.COMBO_THRESHOLD=3,this.COMBO_MULTIPLIER=1.5,this.loadHighScore()}addScore(t,e){let i=t;return e!==void 0&&(e-this.lastKillTime<=this.COMBO_TIMEOUT?this.consecutiveKills++:this.consecutiveKills=1,this.lastKillTime=e,this.consecutiveKills>=this.COMBO_THRESHOLD&&(i=Math.floor(t*this.COMBO_MULTIPLIER))),this.currentScore+=i,this.currentScore>this.highScore&&(this.highScore=this.currentScore),i}recordEnemyDestroyed(){this.enemiesDestroyed++}recordShot(){this.totalShots++}recordShots(t){this.totalShots+=t}recordHit(){this.totalHits++}getScoreData(){return{currentScore:this.currentScore,highScore:this.highScore,enemiesDestroyed:this.enemiesDestroyed,accuracy:this.calculateAccuracy()}}getCurrentScore(){return this.currentScore}getHighScore(){return this.highScore}getEnemiesDestroyed(){return this.enemiesDestroyed}getComboCount(){return this.consecutiveKills}isComboActive(t){return this.consecutiveKills>=this.COMBO_THRESHOLD&&t-this.lastKillTime<=this.COMBO_TIMEOUT}calculateAccuracy(){return this.totalShots===0?0:Math.round(this.totalHits/this.totalShots*100)}getTotalShots(){return this.totalShots}getTotalHits(){return this.totalHits}saveHighScore(){try{localStorage.setItem(L,this.highScore.toString())}catch{}}loadHighScore(){try{const t=localStorage.getItem(L);if(t!==null){const e=parseInt(t,10);!isNaN(e)&&e>=0&&(this.highScore=e)}}catch{}}reset(){this.saveHighScore(),this.currentScore=0,this.enemiesDestroyed=0,this.totalShots=0,this.totalHits=0,this.consecutiveKills=0,this.lastKillTime=0}resetAll(){this.currentScore=0,this.highScore=0,this.enemiesDestroyed=0,this.totalShots=0,this.totalHits=0,this.consecutiveKills=0,this.lastKillTime=0;try{localStorage.removeItem(L)}catch{}}calculateFinalScore(){const t=this.calculateAccuracy();let e=this.currentScore;return t>70&&(e=Math.floor(e*1.2)),e}applyFinalBonus(){const t=this.calculateFinalScore();this.currentScore=t,this.currentScore>this.highScore&&(this.highScore=this.currentScore),this.saveHighScore()}};g(rt,"ScoreSystem");let W=rt;const lt=class lt{constructor(){this.sounds=new Map,this.bgm=null,this.soundVolume=.7,this.musicVolume=.5,this.muted=!1,this.audioContext=null,this.initialized=!1;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch{}}async initialize(){if(!this.initialized){if(this.audioContext&&this.audioContext.state==="suspended")try{await this.audioContext.resume()}catch{}this.initialized=!0}}loadSound(t,e){return new Promise(i=>{const s=new Audio;s.addEventListener("canplaythrough",()=>{this.sounds.set(t,s),i()},{once:!0}),s.addEventListener("error",a=>{i()},{once:!0}),s.src=e,s.load()})}loadMusic(t){return new Promise(e=>{this.bgm=new Audio,this.bgm.addEventListener("canplaythrough",()=>{this.bgm&&(this.bgm.loop=!0,this.bgm.volume=this.muted?0:this.musicVolume),e()},{once:!0}),this.bgm.addEventListener("error",i=>{this.bgm=null,e()},{once:!0}),this.bgm.src=t,this.bgm.load()})}playSound(t){if(this.muted)return;const e=this.sounds.get(t);if(e)try{const i=e.cloneNode();i.volume=this.soundVolume,i.play().catch(s=>{}),i.addEventListener("ended",()=>{i.remove()},{once:!0})}catch{}}playMusic(){if(this.bgm)try{this.bgm.volume=this.muted?0:this.musicVolume,this.bgm.play().catch(t=>{})}catch{}}stopMusic(){if(this.bgm)try{this.bgm.pause(),this.bgm.currentTime=0}catch{}}pauseMusic(){if(this.bgm)try{this.bgm.pause()}catch{}}resumeMusic(){if(!(!this.bgm||this.muted))try{this.bgm.play().catch(t=>{})}catch{}}setSoundVolume(t){this.soundVolume=Math.max(0,Math.min(1,t))}getSoundVolume(){return this.soundVolume}setMusicVolume(t){this.musicVolume=Math.max(0,Math.min(1,t)),this.bgm&&!this.muted&&(this.bgm.volume=this.musicVolume)}getMusicVolume(){return this.musicVolume}toggleMute(){return this.muted=!this.muted,this.bgm&&(this.bgm.volume=this.muted?0:this.musicVolume),this.muted}setMuted(t){this.muted=t,this.bgm&&(this.bgm.volume=this.muted?0:this.musicVolume)}isMuted(){return this.muted}getConfig(){return{soundVolume:this.soundVolume,musicVolume:this.musicVolume,muted:this.muted}}setConfig(t){t.soundVolume!==void 0&&this.setSoundVolume(t.soundVolume),t.musicVolume!==void 0&&this.setMusicVolume(t.musicVolume),t.muted!==void 0&&this.setMuted(t.muted)}isSoundLoaded(t){return this.sounds.has(t)}isMusicLoaded(){return this.bgm!==null}async preloadSounds(t="assets/audio/"){const e={[p.PLAYER_SHOOT]:"player_shoot.mp3",[p.ENEMY_SHOOT]:"enemy_shoot.mp3",[p.EXPLOSION]:"explosion.mp3",[p.POWER_UP]:"power_up.mp3",[p.HIT]:"hit.mp3"},i=[];for(const[s,a]of Object.entries(e))i.push(this.loadSound(s,t+a));await Promise.all(i)}dispose(){this.bgm&&(this.bgm.pause(),this.bgm.src="",this.bgm=null);for(const t of this.sounds.values())t.src="";this.sounds.clear(),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.initialized=!1}};g(lt,"AudioManager");let K=lt;const dt=class dt{constructor(t=b){this.particles=[],this.explosions=[],this.screenEffects=[],this.time=0,this.explosionColors={normal:["#ffffff","#ffff00","#ff8800","#ff4400","#ff0000"],blue:["#ffffff","#88ffff","#00ccff","#0088ff","#0044aa"],green:["#ffffff","#88ff88","#00ff00","#00cc00","#008800"],purple:["#ffffff","#ff88ff","#ff00ff","#cc00cc","#880088"]},this.config=t}update(t){this.time+=t,this.updateParticles(t),this.updateExplosions(t),this.updateScreenEffects(t)}createExplosion(t,e,i=1,s="normal"){const a=this.explosionColors[s],h=[],n=Math.floor(25*i);for(let o=0;o<n;o++){const l=Math.random()*Math.PI*2,d=80+Math.random()*150*i;h.push({x:t,y:e,vx:Math.cos(l)*d,vy:Math.sin(l)*d,life:.4+Math.random()*.4,maxLife:.8,size:3+Math.random()*6*i,color:a[Math.floor(Math.random()*a.length)],alpha:1,type:"fire"})}for(let o=0;o<n/2;o++){const l=Math.random()*Math.PI*2,d=30+Math.random()*50;h.push({x:t+(Math.random()-.5)*20,y:e+(Math.random()-.5)*20,vx:Math.cos(l)*d,vy:Math.sin(l)*d-30,life:.6+Math.random()*.6,maxLife:1.2,size:8+Math.random()*12*i,color:"#444444",alpha:.6,type:"smoke"})}for(let o=0;o<8*i;o++){const l=Math.random()*Math.PI*2,d=100+Math.random()*200;h.push({x:t,y:e,vx:Math.cos(l)*d,vy:Math.sin(l)*d,life:.5+Math.random()*.5,maxLife:1,size:2+Math.random()*4,color:"#888888",alpha:1,type:"debris",rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*20})}this.explosions.push({x:t,y:e,radius:0,maxRadius:40*i,life:.3,maxLife:.3,particles:h,shockwave:i>=1,shockwaveRadius:0}),i>=1.5&&this.addScreenShake(.2,i*3)}createEngineTrail(t,e,i=!0){const s=i?"#00aaff":"#ff6600",a=i?"#ffffff":"#ffff00";for(let h=0;h<2;h++)this.particles.push({x:t+(Math.random()-.5)*8,y:e,vx:(Math.random()-.5)*15,vy:80+Math.random()*40,life:.15+Math.random()*.1,maxLife:.25,size:3+Math.random()*3,color:Math.random()>.5?s:a,alpha:.8,type:"trail"})}createImpactSparks(t,e,i=8){for(let s=0;s<i;s++){const a=Math.random()*Math.PI*2,h=100+Math.random()*150;this.particles.push({x:t,y:e,vx:Math.cos(a)*h,vy:Math.sin(a)*h,life:.1+Math.random()*.15,maxLife:.25,size:2+Math.random()*2,color:Math.random()>.5?"#ffff00":"#ffffff",alpha:1,type:"spark"})}}createPowerUpEffect(t,e,i){for(let s=0;s<12;s++){const a=s/12*Math.PI*2,h=80+Math.random()*40;this.particles.push({x:t,y:e,vx:Math.cos(a)*h,vy:Math.sin(a)*h,life:.4+Math.random()*.2,maxLife:.6,size:4+Math.random()*4,color:i,alpha:1,type:"star"})}this.addScreenFlash(.1,i)}createDamageEffect(){this.screenEffects.push({type:"damage",duration:.3,elapsed:0,intensity:.4,color:"#ff0000"})}addScreenShake(t,e){this.screenEffects.push({type:"shake",duration:t,elapsed:0,intensity:e})}addScreenFlash(t,e){this.screenEffects.push({type:"flash",duration:t,elapsed:0,intensity:.3,color:e})}updateParticles(t){for(let e=this.particles.length-1;e>=0;e--){const i=this.particles[e];i.x+=i.vx*t,i.y+=i.vy*t,(i.type==="debris"||i.type==="smoke")&&(i.vy+=200*t),i.rotation!==void 0&&i.rotationSpeed!==void 0&&(i.rotation+=i.rotationSpeed*t),i.life-=t,i.alpha=Math.max(0,i.life/i.maxLife),i.type==="smoke"&&(i.size+=10*t),i.life<=0&&this.particles.splice(e,1)}}updateExplosions(t){for(let e=this.explosions.length-1;e>=0;e--){const i=this.explosions[e];i.life-=t;const s=1-i.life/i.maxLife;i.radius=i.maxRadius*s,i.shockwave&&(i.shockwaveRadius=i.maxRadius*2*s);for(const a of i.particles)a.x+=a.vx*t,a.y+=a.vy*t,a.life-=t,a.alpha=Math.max(0,a.life/a.maxLife),(a.type==="debris"||a.type==="smoke")&&(a.vy+=150*t),a.type==="fire"&&(a.vx*=.95,a.vy*=.95),a.rotation!==void 0&&a.rotationSpeed!==void 0&&(a.rotation+=a.rotationSpeed*t);i.life<=0&&this.explosions.splice(e,1)}}updateScreenEffects(t){for(let e=this.screenEffects.length-1;e>=0;e--){const i=this.screenEffects[e];i.elapsed+=t,i.elapsed>=i.duration&&this.screenEffects.splice(e,1)}}render(t){t.save();const e=this.screenEffects.find(i=>i.type==="shake");if(e){const i=1-e.elapsed/e.duration,s=(Math.random()-.5)*e.intensity*i*2,a=(Math.random()-.5)*e.intensity*i*2;t.translate(s,a)}this.renderExplosions(t),this.renderParticles(t),t.restore(),this.renderScreenEffects(t)}renderExplosions(t){for(const e of this.explosions){const i=e.life/e.maxLife;e.shockwave&&e.shockwaveRadius>0&&(t.save(),t.globalAlpha=i*.3,t.strokeStyle="#ffffff",t.lineWidth=3,t.beginPath(),t.arc(e.x,e.y,e.shockwaveRadius,0,Math.PI*2),t.stroke(),t.restore()),t.save(),t.globalAlpha=i*.6;const s=t.createRadialGradient(e.x,e.y,0,e.x,e.y,e.radius);s.addColorStop(0,"#ffffff"),s.addColorStop(.3,"#ffff00"),s.addColorStop(.6,"#ff6600"),s.addColorStop(1,"rgba(255, 0, 0, 0)"),t.fillStyle=s,t.beginPath(),t.arc(e.x,e.y,e.radius,0,Math.PI*2),t.fill(),t.restore();for(const a of e.particles)this.renderParticle(t,a)}}renderParticles(t){for(const e of this.particles)this.renderParticle(t,e)}renderParticle(t,e){if(!(e.alpha<=0)){switch(t.save(),t.globalAlpha=e.alpha,e.type){case"spark":case"fire":const i=t.createRadialGradient(e.x,e.y,0,e.x,e.y,e.size);i.addColorStop(0,e.color),i.addColorStop(.5,e.color),i.addColorStop(1,"transparent"),t.fillStyle=i,t.beginPath(),t.arc(e.x,e.y,e.size,0,Math.PI*2),t.fill();break;case"smoke":t.fillStyle=e.color,t.globalAlpha=e.alpha*.4,t.beginPath(),t.arc(e.x,e.y,e.size,0,Math.PI*2),t.fill();break;case"debris":t.translate(e.x,e.y),e.rotation!==void 0&&t.rotate(e.rotation),t.fillStyle=e.color,t.fillRect(-e.size/2,-e.size/2,e.size,e.size);break;case"trail":t.fillStyle=e.color,t.beginPath(),t.ellipse(e.x,e.y,e.size/2,e.size,0,0,Math.PI*2),t.fill();break;case"star":this.drawStar(t,e.x,e.y,5,e.size,e.size/2,e.color);break}t.restore()}}renderScreenEffects(t){const{width:e,height:i}=this.config.canvas;for(const s of this.screenEffects){const a=s.elapsed/s.duration;switch(s.type){case"flash":t.save(),t.globalAlpha=s.intensity*(1-a),t.fillStyle=s.color||"#ffffff",t.fillRect(0,0,e,i),t.restore();break;case"damage":t.save();const h=s.intensity*(1-a),n=t.createRadialGradient(e/2,i/2,i*.3,e/2,i/2,i*.8);n.addColorStop(0,"transparent"),n.addColorStop(1,`rgba(255, 0, 0, ${h})`),t.fillStyle=n,t.fillRect(0,0,e,i),t.restore();break}}}drawStar(t,e,i,s,a,h,n){t.fillStyle=n,t.beginPath();for(let o=0;o<s*2;o++){const l=o%2===0?a:h,d=o*Math.PI/s-Math.PI/2,u=e+Math.cos(d)*l,y=i+Math.sin(d)*l;o===0?t.moveTo(u,y):t.lineTo(u,y)}t.closePath(),t.fill()}clear(){this.particles=[],this.explosions=[],this.screenEffects=[]}getParticleCount(){let t=this.particles.length;for(const e of this.explosions)t+=e.particles.length;return t}hasActiveScreenEffects(){return this.screenEffects.length>0}};g(dt,"VisualEffects");let z=dt;const ft=class ft{constructor(t=b){this.stars=[],this.nebulae=[],this.scrollOffset=0,this.scrollSpeed=50,this.time=0,this.starfieldCanvas=null,this.nebulaCanvas=null,this.config=t,this.initialize()}initialize(){this.generateStars(),this.generateNebulae(),this.preRenderLayers()}generateStars(){const{width:t,height:e}=this.config.canvas,i=150;for(let s=0;s<i;s++)this.stars.push({x:Math.random()*t,y:Math.random()*e*2,size:Math.random()*2+.5,speed:Math.random()*.5+.3,brightness:Math.random()*.5+.5,twinklePhase:Math.random()*Math.PI*2})}generateNebulae(){const{width:t,height:e}=this.config.canvas,i=["rgba(100, 50, 150, 0.1)","rgba(50, 100, 150, 0.08)","rgba(150, 50, 100, 0.06)","rgba(50, 150, 100, 0.05)"];for(let s=0;s<5;s++)this.nebulae.push({x:Math.random()*t-100,y:Math.random()*e*2,width:200+Math.random()*200,height:150+Math.random()*150,color:i[Math.floor(Math.random()*i.length)],alpha:.3+Math.random()*.3})}preRenderLayers(){const{width:t,height:e}=this.config.canvas,i=e*2;this.starfieldCanvas=document.createElement("canvas"),this.starfieldCanvas.width=t,this.starfieldCanvas.height=i;const s=this.starfieldCanvas.getContext("2d"),a=s.createLinearGradient(0,0,0,i);a.addColorStop(0,"#0a0a1a"),a.addColorStop(.3,"#0f0f2a"),a.addColorStop(.5,"#1a1a3a"),a.addColorStop(.7,"#0f0f2a"),a.addColorStop(1,"#0a0a1a"),s.fillStyle=a,s.fillRect(0,0,t,i);for(const n of this.stars)s.fillStyle=`rgba(255, 255, 255, ${n.brightness})`,s.beginPath(),s.arc(n.x,n.y,n.size,0,Math.PI*2),s.fill();this.nebulaCanvas=document.createElement("canvas"),this.nebulaCanvas.width=t,this.nebulaCanvas.height=i;const h=this.nebulaCanvas.getContext("2d");for(const n of this.nebulae){const o=h.createRadialGradient(n.x+n.width/2,n.y+n.height/2,0,n.x+n.width/2,n.y+n.height/2,Math.max(n.width,n.height)/2);o.addColorStop(0,n.color),o.addColorStop(1,"transparent"),h.fillStyle=o,h.fillRect(n.x,n.y,n.width,n.height)}}update(t){this.time+=t,this.scrollOffset+=this.scrollSpeed*t;const{height:e}=this.config.canvas;this.scrollOffset>=e&&(this.scrollOffset-=e)}render(t){const{width:e,height:i}=this.config.canvas;if(t.fillStyle="#0a0a1a",t.fillRect(0,0,e,i),this.starfieldCanvas&&(t.drawImage(this.starfieldCanvas,0,this.scrollOffset,e,i,0,0,e,i),this.scrollOffset>0&&t.drawImage(this.starfieldCanvas,0,this.scrollOffset-i,e,i,0,0,e,i)),this.nebulaCanvas){const s=this.scrollOffset*.3;t.globalAlpha=.5,t.drawImage(this.nebulaCanvas,0,s%i,e,i,0,0,e,i),t.globalAlpha=1}this.renderTwinklingStars(t),this.renderDistantObjects(t)}renderTwinklingStars(t){const{height:e}=this.config.canvas;for(let i=0;i<20;i++){const s=this.stars[i%this.stars.length],a=Math.sin(this.time*3+s.twinklePhase)*.5+.5,h=(s.y+this.scrollOffset*s.speed)%e;a>.7&&(t.fillStyle=`rgba(255, 255, 255, ${a*s.brightness})`,t.beginPath(),t.arc(s.x,h,s.size*1.5,0,Math.PI*2),t.fill(),a>.9&&s.size>1.5&&(t.strokeStyle=`rgba(255, 255, 255, ${a*.3})`,t.lineWidth=1,t.beginPath(),t.moveTo(s.x-5,h),t.lineTo(s.x+5,h),t.moveTo(s.x,h-5),t.lineTo(s.x,h+5),t.stroke()))}}renderDistantObjects(t){const{width:e,height:i}=this.config.canvas,s=this.scrollOffset*.1%(i*3)-i;if(s>-100&&s<i+100){const a=t.createRadialGradient(e*.8-10,s-10,0,e*.8,s,40);a.addColorStop(0,"rgba(100, 80, 120, 0.3)"),a.addColorStop(.5,"rgba(60, 50, 80, 0.2)"),a.addColorStop(1,"rgba(30, 25, 40, 0.1)"),t.fillStyle=a,t.beginPath(),t.arc(e*.8,s,40,0,Math.PI*2),t.fill()}}setScrollSpeed(t){this.scrollSpeed=t}getScrollOffset(){return this.scrollOffset}reset(){this.scrollOffset=0,this.time=0}};g(ft,"BackgroundRenderer");let V=ft;const ct=class ct{constructor(t=b){this.time=0,this.titleFont='bold 48px "Segoe UI", Arial, sans-serif',this.subtitleFont='24px "Segoe UI", Arial, sans-serif',this.buttonFont='bold 22px "Segoe UI", Arial, sans-serif',this.textFont='18px "Segoe UI", Arial, sans-serif',this.smallFont='14px "Segoe UI", Arial, sans-serif',this.colors={primary:"#00d4ff",secondary:"#ff6b6b",accent:"#ffd700",success:"#00ff88",danger:"#ff4444",text:"#ffffff",textMuted:"#aaaaaa",background:"rgba(0, 0, 0, 0.8)",panel:"rgba(20, 30, 50, 0.9)"},this.config=t}update(t){this.time+=t}renderMenuScreen(t,e=0){const{width:i,height:s}=this.config.canvas;t.fillStyle="rgba(0, 0, 0, 0.3)",t.fillRect(0,0,i,s),this.drawGlowText(t,"THUNDER FIGHTER",i/2,s*.25,{font:this.titleFont,color:this.colors.primary,glowColor:this.colors.primary,glowSize:20}),t.fillStyle=this.colors.text,t.font=this.subtitleFont,t.textAlign="center",t.fillText("Èõ∑ÈúÜÊàòÊú∫",i/2,s*.25+50),this.drawAnimatedLine(t,i/2-100,s*.35,200);const a=["ÂºÄÂßãÊ∏∏Êàè / START GAME","ËÆæÁΩÆ / SETTINGS","ÂÖ≥‰∫é / ABOUT"],h=s*.5,n=60;a.forEach((o,l)=>{const d=h+l*n,u=l===e;this.drawMenuButton(t,o,i/2,d,u)}),t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.textAlign="center",t.fillText("‚Üë‚Üì ÈÄâÊã© / Select   ENTER Á°ÆËÆ§ / Confirm",i/2,s-60),t.fillText("WASD/ÊñπÂêëÈîÆ ÁßªÂä® | SPACE Â∞ÑÂáª | P ÊöÇÂÅú",i/2,s-35),t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.textAlign="right",t.fillText("v1.0.0",i-15,s-15)}drawMenuButton(t,e,i,s,a){const o=i-140,l=s-45/2;if(t.save(),a){const d=Math.sin(this.time*4)*.1+.9;t.shadowColor=this.colors.primary,t.shadowBlur=15*d;const u=t.createLinearGradient(o,l,o+280,l+45);u.addColorStop(0,"rgba(0, 212, 255, 0.3)"),u.addColorStop(.5,"rgba(0, 212, 255, 0.5)"),u.addColorStop(1,"rgba(0, 212, 255, 0.3)"),t.fillStyle=u,t.beginPath(),t.roundRect(o,l,280,45,8),t.fill(),t.strokeStyle=this.colors.primary,t.lineWidth=2,t.stroke(),t.fillStyle=this.colors.primary,t.beginPath(),t.moveTo(o-20,s),t.lineTo(o-8,s-8),t.lineTo(o-8,s+8),t.closePath(),t.fill(),t.fillStyle=this.colors.text,t.font=this.buttonFont,t.textAlign="center",t.textBaseline="middle",t.fillText(e,i,s)}else t.fillStyle="rgba(50, 50, 70, 0.5)",t.beginPath(),t.roundRect(o,l,280,45,8),t.fill(),t.strokeStyle="rgba(100, 100, 120, 0.5)",t.lineWidth=1,t.stroke(),t.fillStyle=this.colors.textMuted,t.font='20px "Segoe UI", Arial, sans-serif',t.textAlign="center",t.textBaseline="middle",t.fillText(e,i,s);t.restore()}renderGameHUD(t,e,i,s,a){const{width:h}=this.config.canvas;t.save();const n=t.createLinearGradient(0,0,0,50);n.addColorStop(0,"rgba(0, 0, 0, 0.7)"),n.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=n,t.fillRect(0,0,h,50),this.drawScoreDisplay(t,e.currentScore,15,12),t.fillStyle=this.colors.accent,t.font=this.smallFont,t.textAlign="center",t.fillText(`HIGH: ${e.highScore}`,h/2,25),this.drawHealthBar(t,i,s,h-130,10,115,18),this.drawWeaponLevel(t,a,h-130,35);const o=t.createLinearGradient(0,this.config.canvas.height-40,0,this.config.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 0.5)"),t.fillStyle=o,t.fillRect(0,this.config.canvas.height-40,h,40),t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.textAlign="left",t.fillText(`ÂáªÊØÅ: ${e.enemiesDestroyed}`,15,this.config.canvas.height-15),t.textAlign="right",t.fillText(`ÂëΩ‰∏≠Áéá: ${e.accuracy}%`,h-15,this.config.canvas.height-15),t.restore()}drawScoreDisplay(t,e,i,s){t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.textAlign="left",t.fillText("SCORE",i,s+8),t.shadowColor=this.colors.accent,t.shadowBlur=5,t.fillStyle=this.colors.text,t.font='bold 24px "Segoe UI", Arial, sans-serif',t.fillText(e.toLocaleString(),i,s+32),t.shadowBlur=0}drawHealthBar(t,e,i,s,a,h,n){const o=e/i,l=o>.5?this.colors.success:o>.25?this.colors.accent:this.colors.danger;if(t.fillStyle="rgba(50, 50, 50, 0.8)",t.beginPath(),t.roundRect(s,a,h,n,4),t.fill(),o>0){const d=t.createLinearGradient(s,a,s,a+n);d.addColorStop(0,l),d.addColorStop(1,this.adjustColor(l,-30)),t.fillStyle=d,t.beginPath(),t.roundRect(s+2,a+2,(h-4)*o,n-4,2),t.fill()}t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.beginPath(),t.roundRect(s,a,h,n,4),t.stroke(),t.fillStyle=this.colors.text,t.font='bold 12px "Segoe UI", Arial, sans-serif',t.textAlign="center",t.textBaseline="middle",t.fillText(`${e}/${i}`,s+h/2,a+n/2)}drawWeaponLevel(t,e,i,s){t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.textAlign="left",t.fillText("WEAPON:",i,s);for(let a=1;a<=3;a++){const h=i+60+(a-1)*18;a<=e?(t.fillStyle=this.colors.accent,t.shadowColor=this.colors.accent,t.shadowBlur=5):(t.fillStyle="rgba(100, 100, 100, 0.5)",t.shadowBlur=0),t.beginPath(),t.arc(h,s-4,6,0,Math.PI*2),t.fill()}t.shadowBlur=0}renderPauseScreen(t,e=0){const{width:i,height:s}=this.config.canvas;t.fillStyle="rgba(0, 0, 0, 0.75)",t.fillRect(0,0,i,s);const a=320,h=280,n=(i-a)/2,o=(s-h)/2;this.drawPanel(t,n,o,a,h),this.drawGlowText(t,"PAUSED",i/2,o+50,{font:'bold 36px "Segoe UI", Arial, sans-serif',color:this.colors.text,glowColor:this.colors.primary,glowSize:10}),t.fillStyle=this.colors.textMuted,t.font=this.subtitleFont,t.textAlign="center",t.fillText("Ê∏∏ÊàèÊöÇÂÅú",i/2,o+85);const l=["ÁªßÁª≠Ê∏∏Êàè / RESUME","ÈáçÊñ∞ÂºÄÂßã / RESTART","ËøîÂõûËèúÂçï / MAIN MENU"],d=o+130,u=50;l.forEach((y,v)=>{const E=d+v*u,A=v===e;this.drawMenuButton(t,y,i/2,E,A)})}renderGameOverScreen(t,e,i,s=0){const{width:a,height:h}=this.config.canvas,n=t.createRadialGradient(a/2,h/2,0,a/2,h/2,a);n.addColorStop(0,"rgba(50, 0, 0, 0.8)"),n.addColorStop(1,"rgba(0, 0, 0, 0.9)"),t.fillStyle=n,t.fillRect(0,0,a,h),this.drawGlowText(t,"GAME OVER",a/2,h*.2,{font:'bold 52px "Segoe UI", Arial, sans-serif',color:this.colors.secondary,glowColor:this.colors.secondary,glowSize:25}),t.fillStyle=this.colors.textMuted,t.font=this.subtitleFont,t.textAlign="center",t.fillText("Ê∏∏ÊàèÁªìÊùü",a/2,h*.2+50);const o=h*.35;if(this.drawPanel(t,a/2-150,o,300,150),t.fillStyle=this.colors.textMuted,t.font=this.textFont,t.fillText("ÊúÄÁªàÂæóÂàÜ / FINAL SCORE",a/2,o+35),t.fillStyle=this.colors.text,t.font='bold 42px "Segoe UI", Arial, sans-serif',t.fillText(e.currentScore.toLocaleString(),a/2,o+80),i){const y=Math.sin(this.time*5)*.3+.7;t.fillStyle=`rgba(255, 215, 0, ${y})`,t.font='bold 18px "Segoe UI", Arial, sans-serif',t.fillText("üéâ NEW HIGH SCORE! Êñ∞Á∫™ÂΩï! üéâ",a/2,o+115)}else t.fillStyle=this.colors.accent,t.font=this.smallFont,t.fillText(`ÊúÄÈ´òÂàÜ: ${e.highScore}`,a/2,o+115);t.fillStyle=this.colors.textMuted,t.font=this.smallFont,t.fillText(`ÂáªÊØÅÊïåÊú∫: ${e.enemiesDestroyed} | ÂëΩ‰∏≠Áéá: ${e.accuracy}%`,a/2,o+140);const l=["ÈáçÊñ∞ÂºÄÂßã / RESTART","ËøîÂõûËèúÂçï / MAIN MENU"],d=h*.72,u=55;l.forEach((y,v)=>{const E=d+v*u,A=v===s;this.drawMenuButton(t,y,a/2,E,A)})}drawPanel(t,e,i,s,a){t.save();const h=t.createLinearGradient(e,i,e,i+a);h.addColorStop(0,"rgba(30, 40, 60, 0.95)"),h.addColorStop(1,"rgba(20, 30, 50, 0.95)"),t.fillStyle=h,t.beginPath(),t.roundRect(e,i,s,a,12),t.fill(),t.strokeStyle="rgba(100, 150, 200, 0.3)",t.lineWidth=2,t.stroke(),t.strokeStyle="rgba(100, 150, 200, 0.1)",t.lineWidth=4,t.beginPath(),t.roundRect(e+4,i+4,s-8,a-8,8),t.stroke(),t.restore()}drawGlowText(t,e,i,s,a){t.save(),t.font=a.font,t.textAlign="center",t.textBaseline="middle",t.shadowColor=a.glowColor,t.shadowBlur=a.glowSize,t.fillStyle=a.color;for(let h=0;h<3;h++)t.fillText(e,i,s);t.restore()}drawAnimatedLine(t,e,i,s){const a=(Math.sin(this.time*2)+1)/2;t.save(),t.strokeStyle="rgba(100, 150, 200, 0.3)",t.lineWidth=2,t.beginPath(),t.moveTo(e,i),t.lineTo(e+s,i),t.stroke();const h=s*.3,n=e+(s-h)*a,o=t.createLinearGradient(n,i,n+h,i);o.addColorStop(0,"rgba(0, 212, 255, 0)"),o.addColorStop(.5,"rgba(0, 212, 255, 0.8)"),o.addColorStop(1,"rgba(0, 212, 255, 0)"),t.strokeStyle=o,t.lineWidth=3,t.beginPath(),t.moveTo(n,i),t.lineTo(n+h,i),t.stroke(),t.restore()}adjustColor(t,e){const i=t.replace("#",""),s=Math.max(0,Math.min(255,parseInt(i.substr(0,2),16)+e)),a=Math.max(0,Math.min(255,parseInt(i.substr(2,2),16)+e)),h=Math.max(0,Math.min(255,parseInt(i.substr(4,2),16)+e));return`#${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}`}isPointInButton(t,e,i){return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height}};g(ct,"UIRenderer");let X=ct;const gt=class gt{constructor(){this.sprites=new Map,this.initialized=!1}initialize(){this.initialized||(this.generatePlayerSprite(),this.generateEnemySprites(),this.generateBulletSprites(),this.generatePowerUpSprites(),this.generateExplosionSprites(),this.initialized=!0)}getSprite(t){return this.sprites.get(t)}getEnemySprite(t){switch(t){case c.BASIC:return this.sprites.get("enemy_basic");case c.SHOOTER:return this.sprites.get("enemy_shooter");case c.ZIGZAG:return this.sprites.get("enemy_zigzag");case c.BOSS:return this.sprites.get("enemy_boss");default:return this.sprites.get("enemy_basic")}}getPowerUpSprite(t){switch(t){case w.WEAPON_UPGRADE:return this.sprites.get("powerup_weapon");case w.HEALTH:return this.sprites.get("powerup_health");case w.SHIELD:return this.sprites.get("powerup_shield");default:return this.sprites.get("powerup_weapon")}}generatePlayerSprite(){const i=this.createCanvas(48,64),s=i.getContext("2d"),a=s.createLinearGradient(0,0,48,64);a.addColorStop(0,"#00d4ff"),a.addColorStop(.5,"#0099cc"),a.addColorStop(1,"#006699"),s.fillStyle=a,s.beginPath(),s.moveTo(48/2,0),s.lineTo(48*.85,64*.3),s.lineTo(48,64*.6),s.lineTo(48*.7,64*.7),s.lineTo(48*.6,64),s.lineTo(48*.4,64),s.lineTo(48*.3,64*.7),s.lineTo(0,64*.6),s.lineTo(48*.15,64*.3),s.closePath(),s.fill();const h=s.createRadialGradient(48/2,64*.35,0,48/2,64*.35,10);h.addColorStop(0,"#ffffff"),h.addColorStop(.5,"#87ceeb"),h.addColorStop(1,"#4169e1"),s.fillStyle=h,s.beginPath(),s.ellipse(48/2,64*.35,8,12,0,0,Math.PI*2),s.fill(),s.fillStyle="#ff6600",s.beginPath(),s.ellipse(48*.35,61,4,6,0,0,Math.PI*2),s.fill(),s.beginPath(),s.ellipse(48*.65,61,4,6,0,0,Math.PI*2),s.fill(),s.strokeStyle="rgba(255, 255, 255, 0.5)",s.lineWidth=1,s.beginPath(),s.moveTo(48/2,5),s.lineTo(48*.3,64*.4),s.stroke(),this.sprites.set("player",{width:48,height:64,canvas:i})}generateEnemySprites(){this.generateBasicEnemySprite(),this.generateShooterEnemySprite(),this.generateZigzagEnemySprite(),this.generateBossEnemySprite()}generateBasicEnemySprite(){const i=this.createCanvas(32,32),s=i.getContext("2d"),a=s.createLinearGradient(0,0,32,32);a.addColorStop(0,"#ff6b6b"),a.addColorStop(1,"#cc4444"),s.fillStyle=a,s.beginPath(),s.moveTo(32/2,32),s.lineTo(0,0),s.lineTo(32,0),s.closePath(),s.fill(),s.fillStyle="#ffff00",s.beginPath(),s.arc(32/2,32*.4,4,0,Math.PI*2),s.fill(),this.sprites.set("enemy_basic",{width:32,height:32,canvas:i})}generateShooterEnemySprite(){const i=this.createCanvas(36,40),s=i.getContext("2d"),a=s.createLinearGradient(0,0,36,40);a.addColorStop(0,"#ffa500"),a.addColorStop(1,"#cc7700"),s.fillStyle=a,s.beginPath(),s.moveTo(36/2,0),s.lineTo(36,40/2),s.lineTo(36/2,40),s.lineTo(0,40/2),s.closePath(),s.fill(),s.fillStyle="#ff4500",s.fillRect(36/2-4,32,8,10),s.fillStyle="#ffffff",s.beginPath(),s.arc(36/2,40*.4,5,0,Math.PI*2),s.fill(),s.fillStyle="#000000",s.beginPath(),s.arc(36/2,40*.4,2,0,Math.PI*2),s.fill(),this.sprites.set("enemy_shooter",{width:36,height:40,canvas:i})}generateZigzagEnemySprite(){const i=this.createCanvas(36,36),s=i.getContext("2d"),a=s.createLinearGradient(0,0,36,36);a.addColorStop(0,"#9b59b6"),a.addColorStop(1,"#6c3483"),s.fillStyle=a,s.beginPath(),s.moveTo(36*.3,0),s.lineTo(36*.7,0),s.lineTo(36,36*.4),s.lineTo(36*.8,36),s.lineTo(36*.2,36),s.lineTo(0,36*.4),s.closePath(),s.fill();const h=s.createRadialGradient(36/2,36/2,0,36/2,36/2,8);h.addColorStop(0,"#ffffff"),h.addColorStop(.5,"#e74c3c"),h.addColorStop(1,"#9b59b6"),s.fillStyle=h,s.beginPath(),s.arc(36/2,36/2,8,0,Math.PI*2),s.fill(),this.sprites.set("enemy_zigzag",{width:36,height:36,canvas:i})}generateBossEnemySprite(){const i=this.createCanvas(96,80),s=i.getContext("2d"),a=s.createLinearGradient(0,0,96,80);a.addColorStop(0,"#8b0000"),a.addColorStop(.5,"#cc0000"),a.addColorStop(1,"#660000"),s.fillStyle=a,s.beginPath(),s.moveTo(96/2,80),s.lineTo(0,80*.3),s.lineTo(96*.2,0),s.lineTo(96*.8,0),s.lineTo(96,80*.3),s.closePath(),s.fill(),s.fillStyle="#4a0000",s.beginPath(),s.moveTo(0,80*.35),s.lineTo(96*.25,80*.5),s.lineTo(96*.15,80*.7),s.closePath(),s.fill(),s.beginPath(),s.moveTo(96,80*.35),s.lineTo(96*.75,80*.5),s.lineTo(96*.85,80*.7),s.closePath(),s.fill();const h=s.createRadialGradient(96/2,80*.35,0,96/2,80*.35,15);h.addColorStop(0,"#ff0000"),h.addColorStop(.7,"#990000"),h.addColorStop(1,"#660000"),s.fillStyle=h,s.beginPath(),s.ellipse(96/2,80*.35,15,12,0,0,Math.PI*2),s.fill(),s.fillStyle="#333333",s.fillRect(96*.3-4,70,8,12),s.fillRect(96*.5-4,70,8,12),s.fillRect(96*.7-4,70,8,12),this.sprites.set("enemy_boss",{width:96,height:80,canvas:i})}generateBulletSprites(){const i=this.createCanvas(6,16),s=i.getContext("2d"),a=s.createLinearGradient(0,0,6,0);a.addColorStop(0,"#ffcc00"),a.addColorStop(.5,"#ffff00"),a.addColorStop(1,"#ffcc00"),s.fillStyle=a,s.beginPath(),s.roundRect(0,0,6,16,3),s.fill(),s.shadowColor="#ffff00",s.shadowBlur=5,s.fill(),this.sprites.set("bullet_player",{width:6,height:16,canvas:i});const h=8,n=8,o=this.createCanvas(h,n),l=o.getContext("2d"),d=l.createRadialGradient(h/2,n/2,0,h/2,n/2,h/2);d.addColorStop(0,"#ffffff"),d.addColorStop(.3,"#ff6666"),d.addColorStop(1,"#ff0000"),l.fillStyle=d,l.beginPath(),l.arc(h/2,n/2,h/2,0,Math.PI*2),l.fill(),this.sprites.set("bullet_enemy",{width:h,height:n,canvas:o})}generatePowerUpSprites(){const e=this.createCanvas(28,28),i=e.getContext("2d");this.drawStar(i,28/2,28/2,5,28/2,28/4,"#ffd700","#ffaa00"),this.sprites.set("powerup_weapon",{width:28,height:28,canvas:e});const s=this.createCanvas(28,28),a=s.getContext("2d");this.drawHealthCross(a,28),this.sprites.set("powerup_health",{width:28,height:28,canvas:s});const h=this.createCanvas(28,28),n=h.getContext("2d");this.drawShield(n,28),this.sprites.set("powerup_shield",{width:28,height:28,canvas:h})}drawStar(t,e,i,s,a,h,n,o){t.beginPath();for(let d=0;d<s*2;d++){const u=d%2===0?a:h,y=d*Math.PI/s-Math.PI/2,v=e+Math.cos(y)*u,E=i+Math.sin(y)*u;d===0?t.moveTo(v,E):t.lineTo(v,E)}t.closePath();const l=t.createRadialGradient(e,i,0,e,i,a);l.addColorStop(0,"#ffffff"),l.addColorStop(.3,n),l.addColorStop(1,o),t.fillStyle=l,t.fill(),t.strokeStyle=o,t.lineWidth=1,t.stroke()}drawHealthCross(t,e){const i=e*.35,s=e*.85,a=(e-s)/2,h=(e-i)/2,n=t.createRadialGradient(e/2,e/2,0,e/2,e/2,e/2);n.addColorStop(0,"#ffffff"),n.addColorStop(.7,"#00ff00"),n.addColorStop(1,"#00aa00"),t.fillStyle=n,t.beginPath(),t.arc(e/2,e/2,e/2-2,0,Math.PI*2),t.fill(),t.fillStyle="#ffffff",t.fillRect(h,a,i,s),t.fillRect(a,h,s,i)}drawShield(t,e){const i=e/2,s=e/2,a=t.createRadialGradient(i,s,0,i,s,e/2);a.addColorStop(0,"rgba(65, 105, 225, 0.8)"),a.addColorStop(.7,"rgba(65, 105, 225, 0.4)"),a.addColorStop(1,"rgba(65, 105, 225, 0)"),t.fillStyle=a,t.beginPath(),t.arc(i,s,e/2,0,Math.PI*2),t.fill();const h=t.createLinearGradient(0,0,e,e);h.addColorStop(0,"#87ceeb"),h.addColorStop(.5,"#4169e1"),h.addColorStop(1,"#1e3a8a"),t.fillStyle=h,t.beginPath(),t.moveTo(i,s-e*.35),t.lineTo(i+e*.3,s-e*.15),t.lineTo(i+e*.3,s+e*.1),t.lineTo(i,s+e*.35),t.lineTo(i-e*.3,s+e*.1),t.lineTo(i-e*.3,s-e*.15),t.closePath(),t.fill(),t.strokeStyle="#ffffff",t.lineWidth=2,t.stroke()}generateExplosionSprites(){const e=[{radius:.2,alpha:1,colors:["#ffffff","#ffff00","#ff6600"]},{radius:.5,alpha:.9,colors:["#ffff00","#ff6600","#ff0000"]},{radius:.8,alpha:.6,colors:["#ff6600","#ff0000","#990000"]},{radius:1,alpha:.3,colors:["#ff0000","#990000","#330000"]}],i=["explosion_1","explosion_2","explosion_3","explosion_4"];e.forEach((s,a)=>{const h=this.createCanvas(64,64),n=h.getContext("2d"),o=64/2,l=64/2,d=64/2*s.radius,u=n.createRadialGradient(o,l,0,o,l,d*1.5);u.addColorStop(0,`rgba(255, 200, 0, ${s.alpha*.5})`),u.addColorStop(1,"rgba(255, 100, 0, 0)"),n.fillStyle=u,n.beginPath(),n.arc(o,l,d*1.5,0,Math.PI*2),n.fill();const y=n.createRadialGradient(o,l,0,o,l,d);y.addColorStop(0,s.colors[0]),y.addColorStop(.5,s.colors[1]),y.addColorStop(1,s.colors[2]),n.globalAlpha=s.alpha,n.fillStyle=y,n.beginPath(),n.arc(o,l,d,0,Math.PI*2),n.fill(),n.globalAlpha=s.alpha*.8;for(let v=0;v<8;v++){const E=v/8*Math.PI*2,A=d*(.8+Math.random()*.4),St=o+Math.cos(E)*A,wt=l+Math.sin(E)*A;n.fillStyle=s.colors[Math.floor(Math.random()*s.colors.length)],n.beginPath(),n.arc(St,wt,3+Math.random()*3,0,Math.PI*2),n.fill()}n.globalAlpha=1,this.sprites.set(i[a],{width:64,height:64,canvas:h})})}createCanvas(t,e){const i=document.createElement("canvas");return i.width=t,i.height=e,i}drawSprite(t,e,i,s,a,h){const n=this.sprites.get(e);if(!n)return;const o=a??n.width,l=h??n.height;t.drawImage(n.canvas,i,s,o,l)}isInitialized(){return this.initialized}};g(gt,"SpriteManager");let $=gt;const ut=class ut{constructor(t,e,i=b){this.id=`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.x=t,this.y=e,this.config=i,this.width=i.player.width,this.height=i.player.height,this.active=!0,this.velocityX=0,this.velocityY=0,this.speed=i.player.speed,this.collisionBox={x:this.x,y:this.y,width:this.width,height:this.height},this.collisionType=S.PLAYER,this.health=i.player.maxHealth,this.maxHealth=i.player.maxHealth,this.fireRate=i.player.fireRate,this.lastFireTime=0,this.weaponLevel=1,this.invincible=!1,this.invincibleTime=0,this.invincibleDuration=i.player.invincibleDuration,this.canvasWidth=i.canvas.width,this.canvasHeight=i.canvas.height}update(t){this.active&&(this.move(t),this.invincible&&(this.invincibleTime-=t*1e3,this.invincibleTime<=0&&(this.invincible=!1,this.invincibleTime=0)),this.collisionBox.x=this.x,this.collisionBox.y=this.y)}move(t){let e=this.x+this.velocityX*t,i=this.y+this.velocityY*t;e=Math.max(0,Math.min(e,this.canvasWidth-this.width)),i=Math.max(0,Math.min(i,this.canvasHeight-this.height)),this.x=e,this.y=i}setVelocity(t,e){this.velocityX=t,this.velocityY=e}fire(t){if(t-this.lastFireTime<this.fireRate)return[];this.lastFireTime=t;const e=[],i=this.config.bullet.player,s=this.x+this.width/2,a=this.y-i.height;switch(this.weaponLevel){case 1:e.push(new M(s-i.width/2,a,m.PLAYER,-i.speed,this.config));break;case 2:const h=10;e.push(new M(s-i.width/2-h,a,m.PLAYER,-i.speed,this.config)),e.push(new M(s-i.width/2+h,a,m.PLAYER,-i.speed,this.config));break;case 3:default:const n=15;e.push(new M(s-i.width/2-n,a,m.PLAYER,-i.speed,this.config)),e.push(new M(s-i.width/2,a,m.PLAYER,-i.speed,this.config)),e.push(new M(s-i.width/2+n,a,m.PLAYER,-i.speed,this.config));break}return e}takeDamage(t){this.invincible||!this.active||(this.health-=t,this.health<=0?(this.health=0,this.active=!1):(this.invincible=!0,this.invincibleTime=this.invincibleDuration))}heal(t){this.health=Math.min(this.health+t,this.maxHealth)}upgradeWeapon(){this.weaponLevel<3&&this.weaponLevel++}activateShield(t){this.invincible=!0,this.invincibleTime=t}onCollision(t){switch(t.collisionType){case S.ENEMY:case S.ENEMY_BULLET:this.takeDamage(1);break;case S.POWER_UP:break}}checkCollision(t){const e=this.collisionBox,i=t.collisionBox;return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y}render(t){this.active&&(this.invincible&&Math.floor(this.invincibleTime/100)%2===0||(t.save(),t.fillStyle="#00BFFF",t.beginPath(),t.moveTo(this.x+this.width/2,this.y),t.lineTo(this.x,this.y+this.height),t.lineTo(this.x+this.width,this.y+this.height),t.closePath(),t.fill(),t.fillStyle="#87CEEB",t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height*.4,this.width*.15,0,Math.PI*2),t.fill(),t.restore()))}destroy(){this.active=!1}reset(t,e){this.x=t,this.y=e,this.velocityX=0,this.velocityY=0,this.health=this.maxHealth,this.weaponLevel=1,this.invincible=!1,this.invincibleTime=0,this.lastFireTime=0,this.active=!0,this.collisionBox.x=this.x,this.collisionBox.y=this.y}};g(ut,"PlayerAircraft");let Z=ut;const pt=class pt{constructor(t="gameCanvas"){this.player=null,this.gameTime=0,this.isInitialized=!1,this.menuState=null,this.playingState=null,this.pausedState=null,this.gameOverState=null,this.config=b,this.engine=new U(t,this.config),this.stateManager=this.engine.getStateManager(),this.entityManager=this.engine.getEntityManager(),this.inputManager=this.engine.getInputManager(),this.collisionSystem=new N,this.spawnSystem=new _(void 0,this.config),this.scoreSystem=new W,this.audioManager=new K,this.visualEffects=new z(this.config),this.backgroundRenderer=new V(this.config),this.uiRenderer=new X(this.config),this.spriteManager=new $}async initialize(){this.isInitialized||(this.spriteManager.initialize(),await this.audioManager.initialize(),this.loadAudioAssets(),this.registerGameStates(),this.setupCollisionCallbacks(),this.setupGameLoop(),this.isInitialized=!0)}registerGameStates(){this.menuState=new D(this.stateManager,this.config),this.playingState=new G(this.stateManager,this.entityManager,this.config),this.pausedState=new Y(this.stateManager,this.config),this.gameOverState=new F(this.stateManager,this.config),this.stateManager.registerState(f.MENU,this.menuState),this.stateManager.registerState(f.PLAYING,this.playingState),this.stateManager.registerState(f.PAUSED,this.pausedState),this.stateManager.registerState(f.GAME_OVER,this.gameOverState),this.stateManager.changeState(f.MENU)}setupCollisionCallbacks(){this.collisionSystem.onCollision(T.PLAYER_BULLET_ENEMY,t=>{const e=t.entityA,i=t.entityB;if(i.takeDamage(e.damage),e.active=!1,this.scoreSystem.recordHit(),this.visualEffects.createImpactSparks(e.x,e.y,5),this.audioManager.playSound(p.HIT),!i.active){this.scoreSystem.addScore(i.scoreValue,this.gameTime),this.scoreSystem.recordEnemyDestroyed();const s=i.type===c.BOSS?2:1;this.visualEffects.createExplosion(i.x+i.width/2,i.y+i.height/2,s),this.audioManager.playSound(p.EXPLOSION),this.spawnSystem.trySpawnPowerUp(i.x+i.width/2,i.y+i.height/2,this.entityManager),i.type===c.BOSS?this.spawnSystem.onBossDefeated():this.spawnSystem.recordEnemyDestroyed(this.entityManager)}}),this.collisionSystem.onCollision(T.ENEMY_BULLET_PLAYER,t=>{const e=t.entityA,i=t.entityB;i.invincible||(i.takeDamage(e.damage),e.active=!1,this.visualEffects.createDamageEffect(),this.audioManager.playSound(p.HIT),this.playingState&&this.playingState.setHealth(i.health),i.health<=0&&this.handleGameOver())}),this.collisionSystem.onCollision(T.PLAYER_ENEMY,t=>{const e=t.entityA,i=t.entityB;e.invincible||(e.takeDamage(1),i.active=!1,this.visualEffects.createDamageEffect(),this.visualEffects.createExplosion(i.x+i.width/2,i.y+i.height/2,.8),this.audioManager.playSound(p.EXPLOSION),this.playingState&&this.playingState.setHealth(e.health),e.health<=0&&this.handleGameOver())}),this.collisionSystem.onCollision(T.PLAYER_POWERUP,t=>{const e=t.entityA,i=t.entityB;i.apply(e);const s={weaponUpgrade:"#ffd700",health:"#00ff00",shield:"#4169e1"};this.visualEffects.createPowerUpEffect(i.x+i.width/2,i.y+i.height/2,s[i.type]||"#ffffff"),this.audioManager.playSound(p.POWER_UP),this.playingState&&this.playingState.setHealth(e.health)})}setupGameLoop(){const t=this.stateManager.update.bind(this.stateManager),e=this.stateManager.render.bind(this.stateManager);this.stateManager.update=i=>{const s=this.stateManager.getCurrentStateType();s===f.PLAYING?this.updatePlaying(i):s===f.MENU&&this.updateMenu(i),t(i)},this.stateManager.render=i=>{const s=this.stateManager.getCurrentStateType();s===f.PLAYING?this.renderPlaying(i):s===f.MENU?this.renderMenu(i):s===f.PAUSED?(this.renderPlaying(i),e(i)):(s===f.GAME_OVER&&this.renderPlaying(i),e(i))},this.setupStateChangeListeners()}setupStateChangeListeners(){const t=this.stateManager.changeState.bind(this.stateManager);this.stateManager.changeState=e=>{const i=this.stateManager.getCurrentStateType(),s=t(e);return s&&this.onStateChange(i,e),s}}onStateChange(t,e){e===f.PLAYING&&t!==f.PAUSED?this.startNewGame():e===f.PLAYING&&t===f.PAUSED?this.audioManager.resumeMusic():e===f.PAUSED?this.audioManager.pauseMusic():e===f.MENU?(this.audioManager.stopMusic(),this.resetGame()):e===f.GAME_OVER&&this.audioManager.stopMusic()}startNewGame(){this.entityManager.clear(),this.scoreSystem.reset(),this.spawnSystem.reset(),this.visualEffects.clear(),this.backgroundRenderer.reset(),this.gameTime=0;const t=(this.config.canvas.width-this.config.player.width)/2,e=this.config.canvas.height-this.config.player.height-50;this.player=new Z(t,e,this.config),this.entityManager.addEntity(this.player),this.playingState&&this.playingState.setHealth(this.player.health),this.audioManager.playMusic()}resetGame(){this.entityManager.clear(),this.visualEffects.clear(),this.player=null,this.gameTime=0}handleGameOver(){this.scoreSystem.applyFinalBonus(),this.gameOverState&&this.gameOverState.setFinalScore(this.scoreSystem.getCurrentScore()),this.player&&this.visualEffects.createExplosion(this.player.x+this.player.width/2,this.player.y+this.player.height/2,2,"normal"),this.stateManager.changeState(f.GAME_OVER)}updateMenu(t){this.backgroundRenderer.update(t),this.uiRenderer.update(t)}updatePlaying(t){if(this.gameTime+=t*1e3,this.backgroundRenderer.update(t),this.visualEffects.update(t),this.uiRenderer.update(t),this.handlePlayerInput(t),this.spawnSystem.update(t,this.entityManager,this.gameTime),this.entityManager.update(t),this.handleEnemyShooting(),this.player&&this.player.active){const e=this.entityManager.getEntitiesByType(C),i=this.entityManager.getEntitiesByType(M),s=this.entityManager.getEntitiesByType(I);this.collisionSystem.update(this.player,e,i,s)}this.playingState&&this.playingState.addScore(0),this.player&&this.player.active&&Math.random()<.3&&this.visualEffects.createEngineTrail(this.player.x+this.player.width/2,this.player.y+this.player.height)}handlePlayerInput(t){if(!this.player||!this.player.active)return;let e=0,i=0;if(this.inputManager.isActionActive("moveUp")&&(i=-this.player.speed),this.inputManager.isActionActive("moveDown")&&(i=this.player.speed),this.inputManager.isActionActive("moveLeft")&&(e=-this.player.speed),this.inputManager.isActionActive("moveRight")&&(e=this.player.speed),e!==0&&i!==0){const s=1/Math.sqrt(2);e*=s,i*=s}if(this.player.setVelocity(e,i),this.inputManager.isActionActive("fire")){const s=this.player.fire(this.gameTime);if(s.length>0){for(const a of s)this.entityManager.addEntity(a);this.scoreSystem.recordShots(s.length),this.audioManager.playSound(p.PLAYER_SHOOT)}}}handleEnemyShooting(){const t=this.entityManager.getEntitiesByType(C);for(const e of t)if(e.active)if(e.type===c.BOSS){const i=e.fireBoss(this.gameTime);for(const s of i)this.entityManager.addEntity(s);i.length>0&&this.audioManager.playSound(p.ENEMY_SHOOT)}else{const i=e.fire(this.gameTime);i&&(this.entityManager.addEntity(i),this.audioManager.playSound(p.ENEMY_SHOOT))}}renderMenu(t){this.backgroundRenderer.render(t),this.uiRenderer.renderMenuScreen(t,0)}renderPlaying(t){this.backgroundRenderer.render(t);const e=this.entityManager.getEntitiesByType(I),i=this.entityManager.getEntitiesByType(M),s=this.entityManager.getEntitiesByType(C);for(const l of e)l.render(t);for(const l of i)l.render(t);for(const l of s)l.render(t);this.player&&this.player.active&&this.player.render(t),this.visualEffects.render(t);const a=this.scoreSystem.getScoreData(),h=this.player?.health??0,n=this.player?.maxHealth??this.config.player.maxHealth,o=this.player?.weaponLevel??1;this.uiRenderer.renderGameHUD(t,a,h,n,o)}async loadAudioAssets(){try{await Promise.all([this.audioManager.loadSound(p.PLAYER_SHOOT,"sounds/player_shoot.mp3"),this.audioManager.loadSound(p.ENEMY_SHOOT,"sounds/enemy_shoot.mp3"),this.audioManager.loadSound(p.EXPLOSION,"sounds/explosion.mp3"),this.audioManager.loadSound(p.POWER_UP,"sounds/power_up.mp3"),this.audioManager.loadSound(p.HIT,"sounds/hit.mp3"),this.audioManager.loadMusic("music/bgm.mp3")])}catch{}}start(){this.isInitialized&&this.engine.start()}stop(){this.engine.stop(),this.audioManager.dispose()}getEngine(){return this.engine}};g(pt,"ThunderFighterGame");let j=pt,B=null;document.addEventListener("DOMContentLoaded",async()=>{const r=document.getElementById("gameCanvas");if(!r)return;const t=r.getContext("2d");if(t){t.fillStyle="#1a1a2e",t.fillRect(0,0,r.width,r.height),t.fillStyle="#00d4ff",t.font="bold 36px Arial",t.textAlign="center",t.fillText("THUNDER FIGHTER",r.width/2,r.height/2-40),t.fillStyle="#ffffff",t.font="24px Arial",t.fillText("Èõ∑ÈúÜÊàòÊú∫",r.width/2,r.height/2),t.fillStyle="#aaaaaa",t.font="18px Arial",t.fillText("Loading...",r.width/2,r.height/2+40);try{B=new j("gameCanvas"),await B.initialize(),B.start()}catch{t.fillStyle="#1a1a2e",t.fillRect(0,0,r.width,r.height),t.fillStyle="#ff4444",t.font="20px Arial",t.textAlign="center",t.fillText("Failed to load game",r.width/2,r.height/2),t.fillStyle="#aaaaaa",t.font="14px Arial",t.fillText("Please refresh the page",r.width/2,r.height/2+30)}}});
//# sourceMappingURL=main.CmjPnOte.js.map
